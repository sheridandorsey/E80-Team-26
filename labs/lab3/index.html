<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>E80 SP24 - Lab 3: Operational Amplifiers and Marine Sensors</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">E80 SP24</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../lectures/" rel="" target="">
 <span class="menu-text">Lectures</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-labs" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Labs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-labs">    
        <li>
    <a class="dropdown-item" href="../../labs/lab_overview" rel="" target="">
 <span class="dropdown-text">Lab Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab0" rel="" target="">
 <span class="dropdown-text">Lab 0: Tutorial &amp; Skills Review</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab1" rel="" target="">
 <span class="dropdown-text">Lab 1: Go Autonomous</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab2" rel="" target="">
 <span class="dropdown-text">Lab 2: BEM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab3" rel="" target="">
 <span class="dropdown-text">Lab 3: Op-Amps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab4" rel="" target="">
 <span class="dropdown-text">Lab 4: Temperature</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab5" rel="" target="">
 <span class="dropdown-text">Lab 5: Acoustics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab6" rel="" target="">
 <span class="dropdown-text">Lab 6: Fluids</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs/lab7" rel="" target="">
 <span class="dropdown-text">Lab 7: Navigation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../project/" rel="" target="">
 <span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../reference/" rel="" target="">
 <span class="menu-text">Reference Designs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../history/" rel="" target="">
 <span class="menu-text">History</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/HMC-E80/E80" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#op-amp-familiarity-and-offset-amplifier" id="toc-op-amp-familiarity-and-offset-amplifier" class="nav-link" data-scroll-target="#op-amp-familiarity-and-offset-amplifier"><span class="header-section-number">2</span> Op-Amp Familiarity and Offset Amplifier</a></li>
  <li><a href="#sec-led" id="toc-sec-led" class="nav-link" data-scroll-target="#sec-led"><span class="header-section-number">3</span> 555 Timer LED Driver</a></li>
  <li><a href="#sec-transimpedance" id="toc-sec-transimpedance" class="nav-link" data-scroll-target="#sec-transimpedance"><span class="header-section-number">4</span> Transimpedance Amplifiers</a></li>
  <li><a href="#turbidity-measurements" id="toc-turbidity-measurements" class="nav-link" data-scroll-target="#turbidity-measurements"><span class="header-section-number">5</span> Turbidity Measurements</a></li>
  <li><a href="#extra-credit-1.-ph-measurement" id="toc-extra-credit-1.-ph-measurement" class="nav-link" data-scroll-target="#extra-credit-1.-ph-measurement"><span class="header-section-number">6</span> Extra Credit 1. pH Measurement</a></li>
  <li><a href="#extra-credit-2.-salinity-measurement" id="toc-extra-credit-2.-salinity-measurement" class="nav-link" data-scroll-target="#extra-credit-2.-salinity-measurement"><span class="header-section-number">7</span> Extra Credit 2. Salinity Measurement</a></li>
  <li><a href="#extra-credit-3.-pressure-measurement" id="toc-extra-credit-3.-pressure-measurement" class="nav-link" data-scroll-target="#extra-credit-3.-pressure-measurement"><span class="header-section-number">8</span> Extra Credit 3. Pressure Measurement</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 3: Operational Amplifiers and Marine Sensors</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Team Size: 2</p>
<p>Submission Sheet: <a href="../../labs/lab3/submission.html">html</a> <a href="../../labs/lab3/submission.docx">docx</a></p>
<p>Prelab Help Sheet: <a href="../../labs/lab3/prelab.html">html</a></p>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>In this lab you will use operational amplifiers to build a turbidity meter, a sensor that measures the relative clarity of water. Turbidity is an interesting and useful measurement in oceanography, so this turbidity meter could be a stepping stone towards your final project. Further, the op-amp techniques that you use to construct this turbidity meter will be useful in any final project you select; the ability to buffer, shift and scale Voltages and currents is essential to many instruments. Extra credit sections offer the opportunity to explore other interesting marine sensors, and those sensors are also excellent candidates for final project sensors.</p>
<p>After successful completion of this lab, you will be able to</p>
<ul class="task-list">
<li><input type="checkbox">Design and build an offset amplifier using an operational amplifier</li>
<li><input type="checkbox">Design and build a transimpedance amplifier using an operational amplifier</li>
<li><input type="checkbox">Design and build an oscillator using a 555 timer</li>
<li><input type="checkbox">Understand the basic use of LEDs and photodiodes</li>
<li><input type="checkbox">Explain clipping behavior in op-amps</li>
<li><input type="checkbox">Explain how modulating a signal can help separate it from background signals</li>
<li><input type="checkbox">Explain the basic theory of turbidity and turbidity measurements</li>
<li><input type="checkbox">Build and test a complex design by thoughtfully testing and assembling individual parts</li>
<li><input type="checkbox">Use linear regression to extract slope, offset, and appropriate error measures from data</li>
</ul>
<p>This lab will be carried out as sub-teams of two. Policies for sub-teams are discussed in <a href="../../labs/lab2/index.html">lab 2</a></p>
<p>This lab asks you to prepare solutions and handle chemicals. Though we aren’t working with anything hazardous (or which can’t be flushed down the drain), be sure to observe good chemical hygiene practices and use gloves and goggles when handling chemicals or sensitive equipment. Always use gloves when handling any glassware that will go into the turbidity meter.</p>
<p>There are a few resources used in this lab which must be shared. Please respect others and don’t abuse these resources. All the teams in lab are going to have to share a single turbidity meter and beaker of mystery solution. There will be three digital scales available. For Extra Credit 1, we have a limited supply of buffer solutions which must last for all our labs, so don’t pour out more than you need to cover your pH probes and be sure to use the smaller set of beakers.</p>
</section>
<section id="op-amp-familiarity-and-offset-amplifier" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="op-amp-familiarity-and-offset-amplifier"><span class="header-section-number">2</span> Op-Amp Familiarity and Offset Amplifier</h2>
<p>In this section, we are going to demonstrate an op-amp failing to work properly, then we will correct that failure by modifying the op-amp circuit. The modified circuit will be an offset amplifier, which is one of the most common circuits in the final project.</p>
<p>Do the following:</p>
<ol type="1">
<li>Use an <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/21314g.pdf">MCP601</a> to build a single-rail, non-inverting amplifier with a gain of two. Pay attention to the maximum allowed supply Voltage. Use a 5 V supply Voltage.</li>
<li>Apply a 100 mV amplitude sine wave with a 1 V offset to the amplifier input and observe the output. This output should match simple theoretical calculations well.</li>
<li>Apply a 100 mV amplitude sine wave with a 0 V offset to the amplifier input and observe the output. This output should have severe non-idealities related to the amplifier behavior. Identify the non-idealities, and explain why they are present in the output.</li>
<li>Design, build and test an offset amplifier that can take a 100mV amplitude sine wave with 0 V offset and produce an output with none of the non-idealities in step 3. Use a 5 V supply Voltage and aim for a gain of negative two (an inverting gain) and an appropriate offset.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why the MCP601?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We are using the MCP601, MCP6002 and MCP6004 in this lab because they are single rail op-amps that are easy to power from a battery. That makes them particularly useful in the final project. You used a few dual rail op-amps in lab 2, and some final projects might demand dual rail op-amps for exacting measurements. For instance, extra credit 1 demands a TL081 for good reason. Talk to an instructor if you want to learn more about the difference between op-amps, which largely have to do with input impedances, output voltage ranges, and some properties that can affect uncertainty.</p>
</div>
</div>
</div>
</section>
<section id="sec-led" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="sec-led"><span class="header-section-number">3</span> 555 Timer LED Driver</h2>
<p>Turbidity is a measurement that depends on illuminating a water sample, then measuring the ratio of transmitted and 90° scattered light. We are going to use an infrared light-emitting diode (IR LED) called the <a href="https://media.digikey.com/PDF/Data%20Sheets/Everlight%20PDFs/9-IR1503.pdf">IR1503</a> to illuminate our sample, and we are going to blink it on and off using a circuit called a <a href="https://www.ti.com/lit/ds/symlink/se555.pdf?">555 timer</a>. Because IR radiation is invisible to the human eye, we need a sensor to tell if our system is working, and the <a href="http://datasheet.octopart.com/OP950-TT-datasheet-7617992.pdf">OP950</a> IR photodiode serves that job well.</p>
<ol type="1">
<li>Build an astable 555 timer oscillator that has a frequency between 500 Hz and 1 kHz and a <a href="https://en.wikipedia.org/wiki/Duty_cycle">duty cycle</a> of approximately 60%. If you use reference designs from the datasheet, <strong>omit RL</strong> from any circuit you build.</li>
<li>Verify that your oscillator is working by measuring the oscillator output Voltage and the capacitor Voltage.</li>
<li>Attach a series combination of a resistor and an IR1503 the output of the 555 timer. Select the resistor value and diode orientation such that you will drive 20-40 mA through the diode when the output is high. Selecting this resistor will require approximating the diode’s forward voltage (VF) at your desired current level, and information in the datasheet can help you figure out an appropriate VF.</li>
<li>Measure the Voltage across the resistor in the resistor-IR1503 combination while the 555 timer is operating. Check that this Voltage waveform implies that the correct current waveform is passing through the IR1503.</li>
<li>Build the switching time test circuit in the OP950 datasheet and use it to check that IR light is coming out of your IR1503. It’s easy to get the OP950 backwards or to pick an unsuitable resistor value, so play around a bit with flipping your OP950 polarity or trying a few different VR and RL values.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why Series Resistors on LEDs?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>LEDs, like all diodes, have an exponential relationship between the voltage applied across them and the current that passes through them. That means applying voltage carelessly can easily blow them up. We prevent such explosions by installing a resistor in series with our IR1503 when we use them. Note that you don’t have to calculate the exponential behavior of the diode because graphs and tables in the datasheet have all the information you need.</p>
<p>The OP950 has similar behavior, so hook it up in series with resistors when you’re testing it on its own. However, we usually use OP950s in transimpedance amplifiers (see <a href="#sec-transimpedance">Section&nbsp;4</a>), which protects them from careless overvoltage conditions.</p>
<p><a href="http://www.physics.unlv.edu/~bill/PHYS483/LED_PIN.pdf">This reference</a> provides background information on LEDs and photodiodes.</p>
</div>
</div>
</div>
</section>
<section id="sec-transimpedance" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="sec-transimpedance"><span class="header-section-number">4</span> Transimpedance Amplifiers</h2>
<p>We will need to measure the amount of light that passes through a solution (either by transmission or 90° scattering) in our turbidity meter. The current through a photodiode is linear in irradiance (see the Light Current vs.&nbsp;Irradiance figure in the OP950 datasheet), so measuring the current passing through a photodiode is equivalent to making a linear measure of incident optical power. That’s great for us, but we don’t know how to measure currents yet. Fortunately, op-amps can help with this, but only if we build a new kind of circuit, called a transmipedance amplifier, which is pictured in <a href="#fig-transimpedance">Figure&nbsp;1</a>.</p>
<div id="fig-transimpedance" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../..\labs/lab3/img/transimpedance_3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Schematic for a transimpedance amplifier</figcaption>
</figure>
</div>
<ol type="1">
<li>Analyze the transimpedance amplifier circuit to determine a formula that relates the diode current, ID, the feedback resistance, RF, and the output voltage, VOUT. Note that the diode acts like a current source pointing away from the op-amp when the photodiode is illuminated.</li>
<li>Build a transimpedance amplifier using the <a href="https://www.digikey.com/en/products/detail/microchip-technology/MCP6004-I-P/523060">MCP6004</a> and an OP950. Configure unused op-amps as unity gain buffers with their inputs and outputs grounded.</li>
<li>Use your LED light source from <a href="#sec-led">Section&nbsp;3</a> to test the transimpedance amplifier. If you are seeing no signal, try flipping your OP950 around. Adjust the feedback resistor so you are seeing a large output signal.</li>
<li>Build and test a second copy of this op-amp circuit for use in your turbidity meter.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Transimpedance Deep Cuts
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Note: Transimpedance amplifiers can be designed in many ways. The design we are recommending that you use is not the highest-speed design. High-speed designs will reverse bias the diode to reduce its junction capacitance (a type of parasitic capacitance found in all diodes) and add a capacitor in parallel with the feedback resistor to filter out noise. However, applying the reverse bias makes current flow the other direction, which would require that the op-amp be dual rail or have an offset to ensure correct operation. This design is the simplest for a single-rail system, and it doesn’t lose performance when measuring large, slow signals like ours.</p>
</div>
</div>
</div>
</section>
<section id="turbidity-measurements" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="turbidity-measurements"><span class="header-section-number">5</span> Turbidity Measurements</h2>
<p>Now it is time to assemble and use the turbidity meter. You will prepare solutions of known turbidity using the <a href="https://drive.google.com/file/d/1aRRGL3DGFiiZZP9Hb7o4LIQauYPwHxP3/view?usp=sharing">TU-2016</a> calibrated laboratory turbidity meter, illuminate them with the LED from <a href="#sec-led">Section&nbsp;3</a>, then measure the transmitted and 90° scattered light using the transimpedance amplifiers from <a href="#sec-transimpedance">Section&nbsp;4</a>. Arranging all of these elements – the sample cuvette holding your solutions, the LEDs and the photodiodes – requires a little bit of mechanical finesse, so we provide a 3D printed fixture (<a href="https://drive.google.com/open?id=1-pEcuCK1zzoU1dhB6DvrvpxaZKwmPZqh">instructions</a>, <a href="https://drive.google.com/open?id=1peSZif9B1dCVGjBPbByFevaRjnXc4YCT">Solidworks for base</a>, <a href="https://drive.google.com/open?id=1zrdfRXLA9rLq4WYW_jSm_Pb-nRgdP9Iq">Solidworks for cover</a>) for holding the cuvette, LED and photodiodes.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
You can Damage the Turbidity Meter
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>DO NOT EVER OPEN THE CALIBRATION STANDARDS</li>
<li>Never touch the glass of the turbidity testing containers with your bare fingers. Handling them with clean gloves is OK.</li>
<li>Be sure to read the TU-2016 instruction manual to familiarize yourself with the operation of the meter before using it.</li>
</ul>
</div>
</div>
<ol type="1">
<li>Prepare a set of solutions of different turbidities using milk and water. Use cuvettes to hold your solutions. You should not need to fill the cuvettes more than 1/2 full. Eyedroppers or beakers may help you to add more precise volumes of milk to your solution.</li>
<li>Check the turbidities of your solutions using the TU-2016.</li>
<li>Assemble your turbidity measurement setup. Note that you can connect your circuits to the measurement fixture in two ways: (1) solder long wires to the OP950s and IR1503 then connect those to a breadboard, or (2) place your measurement fixture directly on top of the breadboard and put the diode feet directly into breadboard rows.</li>
<li>Measure your solutions with your own turbidity measurement setup and record the peak-peak Voltages of your 90° and transmission transimpedance amplifier outputs.</li>
<li>Plot the ratio of the 90° Vpp to the transmission Vpp against the calibrated turbidity of your solutions.</li>
<li>Add a line of best fit and appropriate uncertainty measurements.</li>
<li>Examine the effect of ambient light on your measurements by shadowing your experimental setup while watching a transimpedance amplifier Voltage. Use your observation to justify why we switch our LED on and off with the 555 timer and why we care about peak-peak voltages instead of absolute voltages.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Turbidity and Nephelometry Background
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Turbidity is an optical measurement that is related to the total undissolved solids in the water. Turbidity is an important environmental monitor since undissolved solids can be indicative of eroded runoff, disturbance of the sea floor or other sources of particles.</p>
<p>Modern electronic measurements of turbidity are measured by shining light through a sample and measuring transmission — how much light passes directly through — and 90° scattering — how much light bounces off the particles to a sensor located at 90° relative to the light source.</p>
<p>Devices which measure only 90° scattering are called nephelometers, and devices which measure the ratio of the 90° signal to the transmitted signal are called turbidity meters or turbidimeters. The relative effectiveness of the two devices depends on exactly how many solids are in the water.</p>
<p><a href="https://www.lakesuperiorstreams.org/understanding/param_turbidity.html">This link</a> has some additional information about turbidity, including a picture of some suspensions of different turbidity for visual reference.</p>
</div>
</div>
</div>
</section>
<section id="extra-credit-1.-ph-measurement" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="extra-credit-1.-ph-measurement"><span class="header-section-number">6</span> Extra Credit 1. pH Measurement</h2>
<p>pH needs no introduction, but in oceanography it can be an important indicator of acidic runoff from the surface. The pH of the water also has a strong impact on the health of various plant and animal species, notably coral. You will build a circuit to interact with a pH sensor and calibrate it against buffer solutions.</p>
<p>You will be using buffer solutions in this portion of the lab and they are relatively expensive chemicals. Use the smaller 50mL beakers to hold buffer solutions at your station and take pains not to spill any buffer solution when pouring it from the main supply. Buffer solutions may be rinsed down the sink when you are done with them.</p>
<p>Find a <a href="https://www.pasco.com/prodCatalog/PS/PS-2102_pasport-ph-sensor/">Pasco pH electrode</a>. These electrodes are generally used with interface boxes provided by Pasco (the Pasport system), but we are going to be hooking circuits directly to the BNC connector of the pH probe. The pH probes are delicate instruments, so be sure to always re-cap them in a bath of pH 7 buffer solution and never leave them sitting exposed to air. Rinse them in a bath of deionized water and shake off any excess droplets before returning them to buffer solution.</p>
<p>The probes need special care to make repeatable and accurate measurements, so a few experimental tips will help you to get consistent results: stir the probes gently when you first immerse them in a bath, be sure to wait for the probe voltage to stabilize when taking a measurement because their time constants are long, and keep your hands away from the probes during measurement because the unshielded connections are sensitive to noise that can couple in through your body.</p>
<p>Measure the output voltage on the BNC connector in pH 4, 7 and 10 buffer solutions with a multimeter. What values do you observe?</p>
<p>You are going to attempt to improve the voltage swing achieved with these measurements by using a circuit. Your choice of circuit depends on the output impedance of the pH probe, consult this <a href="http://www.ti.com/lit/an/snoa529a/snoa529a.pdf">application note</a> to get a ballpark estimate for the output impedance and report it. Also, read <a href="http://www.explainthatstuff.com/how-ph-meters-work.html">this</a> reference, a handy guide to the operation of pH sensors, and then describe the physical mechanism which explains the value of the output impedance for this sensor.</p>
<p>Use a TL081 to interface with the pH sensor to achieve a voltage swing of at least 1V between pH 4 and pH 10. What circuit topology did you use and why? Describe your interface circuit.</p>
<p>Measure the voltage your interface circuit produces when the pH sensor is immersed in pH 4, 7 and 10 buffer solutions. Use these measurements to make a calibration plot and add a line of best fit with appropriate quantification of uncertainty. Use your sensor and the line of best fit to determine the pH with confidence limits of the mystery solution in the middle of the room. There is only one small flask of mystery solution that should last for all teams in all sections. DO NOT pour the contents of the flask into another beaker! Rinse off your probe in distilled water. Uncap the mystery solution. Test the pH <em>in situ</em>. Remove the electrode and recap the solution. Rinse off your electrode and store it properly.</p>
</section>
<section id="extra-credit-2.-salinity-measurement" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="extra-credit-2.-salinity-measurement"><span class="header-section-number">7</span> Extra Credit 2. Salinity Measurement</h2>
<p>Salinity is a measure of the total dissolved salt content of water. It is an extremely important and common measurement in oceanographic studies. Salinity measurements are used to track the flow of water and map the hydrological cycle, calibrate acoustic communication links, and understand biological phenomena like algal blooms. In this section you will build a sensor to measure salinity using an inverting operational amplifier. You will prove that it works by calibrating it against saline solutions with different salinity.</p>
<p>In order to design your sensor, you need to know reasonable values for what you’re trying to measure. Your sensor will measure conductivity and the measured value will be used to extract salinity. Find the salinity and conductivity of the ocean using any resource you choose. Note that the equivalent circuit model of a saline solution whose value depends on the separation of the probe electrodes and the salt concentration (why?) is a resistor in parallel with a capacitor. We will ignore the capacitor for this extra credit section, but it is critically important in a design for the final project. You may want to read <a href="https://drive.google.com/file/d/1wtEeyfcI0ObH-54Jn9V4pzgGdI38T4-9/view">this</a> reference for further information.</p>
<p>Design an inverting operational amplifier circuit using one or more TL081 op-amps which has an output voltage that is linear with the conductivity of your solution. Be sure to consider source and load impedances when designing your circuit. Ensure that the output voltage of this circuit will vary over a wide voltage range for the range of saline solutions that you plan to use for calibrating your circuit. This design depends on some of your experimental parameters including the separation of electrodes and the conductivities of the solutions you intend to measure.</p>
<p>One thing to be careful of when measuring salinity is that salt, water and electrons will undergo chemical reactions which can deposit metal salts on your electrodes. These salts can form non-conductive films which stop your conductivity measurements. What kind of waveform should you apply to your circuit in order to make a measurement stable over time? This chemistry can also cause your circuit to fail if the electrode area is too small or the voltage applied to the solution is too low.</p>
<p>Prepare an experimental setup that will allow you to measure the conductivity of salt water. You have access to beakers, wire, electrical tape and digital thermometers. Prepare a set of saline solutions to be used with this setup which are sufficient to prove the sensor is linear. Graduated cylinders would usually be used to measure the volume of water in these solutions. Those are not available to you, so instead you will need to use the digital scales and the well-known relationship between the mass and volume of water. What is that relationship?</p>
<p>Record a calibration curve for your sensor which plots the voltage output of your sensor against the concentration of your salt solution in units of grams per liter on logarithmic X and Y axes. Find a line of best fit including appropriate uncertainty measurements. Then use your sensor and your calibration curve to measure the salinity of the mystery salinity solution on the central table.</p>
<p>Note: You may use <a href="http://www.fivecreeks.org/monitor/sal.shtml">this</a> resource to convert from a measured conductivity to salinity and <a href="https://www.hamzasreef.com/Contents/Calculators/SalinityConversion.php">this</a> resource to convert from salinity to conductivity.</p>
</section>
<section id="extra-credit-3.-pressure-measurement" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="extra-credit-3.-pressure-measurement"><span class="header-section-number">8</span> Extra Credit 3. Pressure Measurement</h2>
<p>In this section you will replicate the pressure circuit on your E79 board to understand its operation. After that you will modify the sensing circuit to optimize the range of the output voltage for the graduated cylinder test that we have used to test pressure sensor operation.</p>
<p>Design an offset amplifier using an MCP601 with a 5V power supply to convert voltage from the <a href="http://www.mouser.com/ds/2/302/MPX5700-783436.pdf">MPX5700</a> pressure sensor to the 0 V-3.3 V output range over a depth of 0-4 m.</p>
<p>Create an experimental setup to vary the pressure on the sensor using a large graduated cylinder, water and plastic tubing. Create a calibration curve relating your measured voltage to the applied pressure, and include appropriate measures of uncertainty.</p>
<p>Return the pressure sensor to stock when you are done with it and be careful not to damage the pins while using it in your breadboard.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>